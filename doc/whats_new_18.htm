<html>
<script type='text/x-mathjax-config'>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath:  [ ['@(@','@)@'] ] ,
    displayMath: [ ['@[@','@]@'] ]
  }
});
</script>
<script type='text/javascript' src=
'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=default'
>
</script>
<head>
<title>Changes and Additions to CppAD During 2018</title>
<meta http-equiv='Content-Type' content='text/html' charset='utf-8'>
<meta name="description" id="description" content="Changes and Additions to CppAD During 2018">
<meta name="keywords" id="keywords" content=" changes additions to cppad during 2018 06-12 06-04 05-29 05-28 05-26 05-20 05-17 05-04 05-03 04-29 04-13 03-20 03-19 03-04 03-02 02-27 02-26 02-23 02-20 ">
<style type='text/css'>
body { color : black }
body { background-color : white }
A:link { color : blue }
A:visited { color : purple }
A:active { color : purple }
</style>
<script type='text/javascript' language='JavaScript' src='_whats_new_18_htm.js'>
</script>
</head>
<body>
<table><tr>
<td>
<a href="https://github.com/coin-or/cppad" target="_top"><img border="0" src="_image.gif"></a>
</td>
<td><a href="whats_new.htm" target="_top">Prev</a>
</td><td><a href="whats_new_17.htm" target="_top">Next</a>
</td><td>
<select onchange='choose_across0(this)'>
<option>Index-&gt;</option>
<option>contents</option>
<option>reference</option>
<option>index</option>
<option>search</option>
<option>external</option>
</select>
</td>
<td>
<select onchange='choose_up0(this)'>
<option>Up-&gt;</option>
<option>CppAD</option>
<option>Appendix</option>
<option>whats_new</option>
<option>whats_new_18</option>
</select>
</td>
<td>
<select onchange='choose_down3(this)'>
<option>CppAD-&gt;</option>
<option>Install</option>
<option>Introduction</option>
<option>AD</option>
<option>ADFun</option>
<option>preprocessor</option>
<option>multi_thread</option>
<option>utility</option>
<option>ipopt_solve</option>
<option>Example</option>
<option>speed</option>
<option>Appendix</option>
</select>
</td>
<td>
<select onchange='choose_down2(this)'>
<option>Appendix-&gt;</option>
<option>Faq</option>
<option>directory</option>
<option>Theory</option>
<option>glossary</option>
<option>Bib</option>
<option>wish_list</option>
<option>whats_new</option>
<option>deprecated</option>
<option>compare_c</option>
<option>numeric_ad</option>
<option>addon</option>
<option>License</option>
</select>
</td>
<td>
<select onchange='choose_down1(this)'>
<option>whats_new-&gt;</option>
<option>whats_new_18</option>
<option>whats_new_17</option>
<option>whats_new_16</option>
<option>whats_new_15</option>
<option>whats_new_14</option>
<option>whats_new_13</option>
<option>whats_new_12</option>
<option>whats_new_11</option>
<option>whats_new_10</option>
<option>whats_new_09</option>
<option>whats_new_08</option>
<option>whats_new_07</option>
<option>whats_new_06</option>
<option>whats_new_05</option>
<option>whats_new_04</option>
<option>whats_new_03</option>
</select>
</td>
<td>whats_new_18</td>
<td>
<select onchange='choose_current0(this)'>
<option>Headings-&gt;</option>
<option>06-12</option>
<option>06-04</option>
<option>05-29</option>
<option>05-28</option>
<option>05-26</option>
<option>05-20</option>
<option>05-17</option>
<option>05-04</option>
<option>05-03</option>
<option>04-29</option>
<option>04-13</option>
<option>03-20</option>
<option>03-19</option>
<option>03-04</option>
<option>03-02</option>
<option>02-27</option>
<option>02-26</option>
<option>02-23</option>
<option>02-20</option>
</select>
</td>
</tr></table><br>
@(@\newcommand{\W}[1]{ \; #1 \; }
\newcommand{\R}[1]{ {\rm #1} }
\newcommand{\B}[1]{ {\bf #1} }
\newcommand{\D}[2]{ \frac{\partial #1}{\partial #2} }
\newcommand{\DD}[3]{ \frac{\partial^2 #1}{\partial #2 \partial #3} }
\newcommand{\Dpow}[2]{ \frac{\partial^{#1}}{\partial  {#2}^{#1}} }
\newcommand{\dpow}[2]{ \frac{ {\rm d}^{#1}}{{\rm d}\, {#2}^{#1}} }@)@


<center><b><big><big>Changes and Additions to CppAD During 2018</big></big></b></center>
<br>
<b><big><a name="06-12" id="06-12">06-12</a></big></b>
<br>
There was false sharing in the
hash table used to detect identical parameter values during
the recording of 
<code><font color="blue"><span style='white-space: nowrap'>AD&lt;</span></font><i><font color="black"><span style='white-space: nowrap'>Base</span></font></i><font color="blue"><span style='white-space: nowrap'>&gt;</span></font></code>
 operations.
This has been fixed and should result in a speed up when multiple
threads are recording at the same time.

<br>
<br>
<b><big><a name="06-04" id="06-04">06-04</a></big></b>
<br>
The memory used during
<a href="subgraph_reverse.htm" target="_top"><span style='white-space: nowrap'>subgraph_reverse</span></a>
, <a href="subgraph_sparsity.htm" target="_top"><span style='white-space: nowrap'>subgraph_sparsity</span></a>
, and
<a href="optimize.htm" target="_top"><span style='white-space: nowrap'>optimize</span></a>
 was changed to use the smallest addressing type possible
for the tape in question.
To be specific the smallest type from the set
<code><font color="blue">unsigned short</font></code>,
<code><font color="blue">unsigned int</font></code>,
<code><font color="blue">size_t</font></code>, in that order.

<br>
<br>
<b><big><a name="05-29" id="05-29">05-29</a></big></b>
<br>
The <a href="autotools.htm" target="_top"><span style='white-space: nowrap'>autotools</span></a>
 install procedure was not working since 05-26.
This has been fixed.

<br>
<br>
<b><big><a name="05-28" id="05-28">05-28</a></big></b>

<ol type="1"><li>
The Coin download page is not longer supporting monthly version.
These versions are now supported by the
<a href="download.htm#Source Code Control" target="_top"><span style='white-space: nowrap'>source&nbsp;code&nbsp;control</span></a>

download procedure.
</li><li>

The windows install procedures have not been kept up to date
and so have been removed; see
<a href="wish_list.htm#Windows Install" target="_top"><span style='white-space: nowrap'>windows&nbsp;install</span></a>
 in the wish list.
</li></ol>


<br>
<br>
<b><big><a name="05-26" id="05-26">05-26</a></big></b>
<br>
Fix some warnings when testing with <code><font color="blue">g++ -std=c++98</font></code>.

<br>
<br>
<b><big><a name="05-20" id="05-20">05-20</a></big></b>

<ol type="1"><li>
The amount of memory used to store each operator was changed from
the size of an enum type to the size of an <code><font color="blue">unsigned char</font></code>; i.e.,
one byte.
This changed <code><font color="blue">CppAD::local::OpCode</font></code> to
<code><font color="blue">CPPAD_OP_CODE_TYPE</font></code> in the expression used to compute
<a href="seq_property.htm#size_op_seq" target="_top"><span style='white-space: nowrap'>size_op_arg</span></a>
.
</li><li>

There was a bug in the call to <code><font color="blue">optimize</font></code> for the CppAD
<a href="speed_cppad.htm" target="_top"><span style='white-space: nowrap'>speed_cppad</span></a>
 tests.
To be specific <code><font color="blue">no_print_for</font></code> was corrected to
<a href="optimize.htm#options.no_print_for_op" target="_top"><span style='white-space: nowrap'>no_prior_for_op</span></a>
.
</li></ol>


<br>
<br>
<b><big><a name="05-17" id="05-17">05-17</a></big></b>
<br>
The memory report for the CppAD matrix multiply speed test was changed
to report the memory before clearing the atomic functions; see the end of
<a href="cppad_mat_mul.cpp.htm" target="_top"><span style='white-space: nowrap'>cppad_mat_mul.cpp</span></a>
.

<br>
<br>
<b><big><a name="05-04" id="05-04">05-04</a></big></b>
<br>
The comparison operations were changed on
<a href="whats_new_15.htm#01-20" target="_top"><span style='white-space: nowrap'>2015-01-20</span></a>
 when the
<a href="independent.htm#abort_op_index" target="_top"><span style='white-space: nowrap'>abort_op_index</span></a>
 option was added.
This change caused a slow down CppAD
because the <a href="compare.htm" target="_top"><span style='white-space: nowrap'>compare</span></a>
 operators used to not be recorded when
<code><font color="blue">NDEBUG</font></code> was defined.
The <a href="independent.htm#record_compare" target="_top"><span style='white-space: nowrap'>record_compare</span></a>
 option has been
added so that one can obtain this better performance
(when one does not need  the <a href="compare_change.htm" target="_top"><span style='white-space: nowrap'>compare_change</span></a>
 function
or the <a href="independent.htm#abort_op_index" target="_top"><span style='white-space: nowrap'>abort_op_index</span></a>
 feature).

<br>
<br>
<b><big><a name="05-03" id="05-03">05-03</a></big></b>
<br>
The following was merged in from the <code><font color="blue">reduce_tape</font></code> branch:
A change was made in the way CppAD iterated over the operation sequence
when subgraph operations were first added; see the heading
<a href="whats_new_17.htm#11-20" target="_top"><span style='white-space: nowrap'>11-20</span></a>
 in whats new for 2017.
This caused CppAD to always use more memory for storing tapes.
This has been fixed so this extra memory is only allocated when it is needed.
In addition it can be freed; see
<a href="seq_property.htm#size_random" target="_top"><span style='white-space: nowrap'>size_random</span></a>
 and
<a href="subgraph_reverse.htm#clear_subgraph" target="_top"><span style='white-space: nowrap'>clear_subgraph</span></a>
.
In addition, this changed the amount of memory returned by
<a href="seq_property.htm#size_op_seq" target="_top"><span style='white-space: nowrap'>size_op_seq</span></a>
 so that it
no longer includes the part returned by <code><font color="blue">size_random</font></code>.

<br>
<br>
<b><big><a name="04-29" id="04-29">04-29</a></big></b>
<br>
Change the <a href="cppad_sparse_hessian.cpp.htm" target="_top"><span style='white-space: nowrap'>cppad_sparse_hessian.cpp</span></a>
 speed test to support the
<a href="speed_main.htm#Sparsity Options.symmetric" target="_top"><span style='white-space: nowrap'>symmetric</span></a>
 option
for sparsity calculations.
This was added because, even though the symmetric sparsity patterns
are more efficient, they seem to take longer to calculation
and hence general sparsity patterns may be faster; see the sparse hessian
<a href="sparse_hessian.htm#work.color_method" target="_top"><span style='white-space: nowrap'>color_method</span></a>
.

<br>
<br>
<b><big><a name="04-13" id="04-13">04-13</a></big></b>
<br>
The <a href="speed_cppad.htm" target="_top"><span style='white-space: nowrap'>speed_cppad</span></a>
 tests were modified to report the
amount of memory allocated at the end of each tests.
This will aid in the reduction of CppAD memory usage.

<br>
<br>
<b><big><a name="03-20" id="03-20">03-20</a></big></b>
<br>
Fix bug in <a href="optimize.htm" target="_top"><span style='white-space: nowrap'>optimize</span></a>
 and <a href="subgraph_sparsity.htm" target="_top"><span style='white-space: nowrap'>subgraph_sparsity</span></a>

when using C++11 <a href="erf.htm" target="_top"><span style='white-space: nowrap'>erf</span></a>
 function.

<br>
<br>
<b><big><a name="03-19" id="03-19">03-19</a></big></b>
<br>
Add more detail to the
<a href="wish_list.htm#Dynamic Parameters" target="_top"><span style='white-space: nowrap'>dynamic&nbsp;parameters</span></a>

whish list item.

<br>
<br>
<b><big><a name="03-04" id="03-04">03-04</a></big></b>
<br>
The <code><font color="blue">example/abs_normal</font></code> directory was missing from the
<a href="directory.htm#Example Directory" target="_top"><span style='white-space: nowrap'>example</span></a>
 sub-directory list.
This has been fixed.

<br>
<br>
<b><big><a name="03-02" id="03-02">03-02</a></big></b>
<br>
Add the <a href="sparse_rcv.htm#pat" target="_top"><span style='white-space: nowrap'>pat</span></a>
 member function to
the <code><font color="blue">sparse_rcv</font></code> template class.

<br>
<br>
<b><big><a name="02-27" id="02-27">02-27</a></big></b>
<br>
Documentation was added to state that the 
<code><i><font color="black"><span style='white-space: nowrap'>work</span></font></i></code>
 structure for
<a href="sparse_jac.htm#work" target="_top"><span style='white-space: nowrap'>sparse_jac</span></a>
 ( <a href="sparse_hes.htm#work" target="_top"><span style='white-space: nowrap'>sparse_hes</span></a>
 )
can be used a different 
<code><i><font color="black"><span style='white-space: nowrap'>f</span></font></i></code>
 and a different 
<code><i><font color="black"><span style='white-space: nowrap'>subset</span></font></i></code>

provided that Jacobian (Hessian) sparsity pattern for 
<code><i><font color="black"><span style='white-space: nowrap'>f</span></font></i></code>

and the sparsity pattern in 
<code><i><font color="black"><span style='white-space: nowrap'>subset</span></font></i></code>
 are the same.

<br>
<br>
<b><big><a name="02-26" id="02-26">02-26</a></big></b>
<br>
The routine <a href="sparse2eigen.htm" target="_top"><span style='white-space: nowrap'>sparse2eigen</span></a>
, added on 02-20, only worked
when the values in the matrix were integers.
This bug has been fixed.

<br>
<br>
<b><big><a name="02-23" id="02-23">02-23</a></big></b>
<br>
The syntax for some of the <a href="utility.htm" target="_top"><span style='white-space: nowrap'>utility</span></a>
 files were missing the
<code><font color="blue"># include</font></code> command (or just the <code><font color="blue">#</font></code> in the include command);
e.g., see the
<a href="set_union.htm#Syntax" target="_top"><span style='white-space: nowrap'>syntax</span></a>
 for the <code><font color="blue">set_union</font></code> utility.

<br>
<br>
<b><big><a name="02-20" id="02-20">02-20</a></big></b>
<br>
Add the utility function <a href="sparse2eigen.htm" target="_top"><span style='white-space: nowrap'>sparse2eigen</span></a>
.


<hr>Input File: omh/appendix/whats_new/whats_new_18.omh

</body>
</html>
